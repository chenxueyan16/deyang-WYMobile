(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/phone/phone"],{"23df":function(n,e,t){"use strict";var o={uNavbar:function(){return t.e("uview-ui/components/u-navbar/u-navbar").then(t.bind(null,"ba98"))},uForm:function(){return t.e("uview-ui/components/u-form/u-form").then(t.bind(null,"8393"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"2189"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"5771"))},uLoading:function(){return t.e("uview-ui/components/u-loading/u-loading").then(t.bind(null,"73e3"))},uToast:function(){return t.e("uview-ui/components/u-toast/u-toast").then(t.bind(null,"f7c3"))}},u=function(){var n=this,e=n.$createElement;n._self._c},i=[];t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return o}))},"5ca6":function(n,e,t){"use strict";t.r(e);var o=t("23df"),u=t("faa3");for(var i in u)"default"!==i&&function(n){t.d(e,n,(function(){return u[n]}))}(i);t("fe6b");var c,a=t("f0c5"),r=Object(a["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=r.exports},a48c:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("31af"),u={data:function(){return{id:null,title:"手机号",captcha:"",phone:"",mobile:"18702942802",canSubmit:!1,canClick:!0,seconds:60,content:"发送验证码",showLoading:!1}},onLoad:function(){try{var e=n.getStorageSync("userInfo");this.mobile=JSON.parse(e).user.mobile,this.id=JSON.parse(e).user.id}catch(t){}},methods:{changeHandle:function(){this.title="更换手机号"},changeValue:function(){""!==this.phone&&""!==this.captcha?this.canSubmit=!0:this.canSubmit=!1},verifyHandle:function(){var n=this,e=/^1(3|4|5|7|8|9)\d{9}$/;n.phone=n.phone.replace(/\s+/g,""),e.test(n.phone)?this.$request("app/tologin/sendSms",JSON.stringify({phone:n.phone})).then((function(e){n.count()})):n.$refs.uToast.show({title:"手机号格式错误",type:"warning"})},count:function(){if(this.canClick){this.canClick=!1,this.content="重新发送("+this.seconds+")秒";var n=this,e=setInterval((function(){n.seconds--,n.content="重新发送("+n.seconds+")秒",n.seconds<0&&(clearInterval(e),n.content="重新发送",n.seconds=60,n.canClick=!0)}),1e3)}},confirmHandle:function(){if(!this.canSubmit)return!1;var e=this;e.showLoading=!0,this.$request("app/tologin/updatePhone",JSON.stringify({phone:e.phone,old_phone:e.mobile,code:e.captcha,user_id:e.id})).then((function(t){0==t.code?(e.showLoading=!1,(0,o.removeInfo)("userInfo"),(0,o.removeInfo)("deptName"),(0,o.removeInfo)("deptId"),(0,o.removeInfo)("roleId"),e.$refs.uToast.show({title:"修改成功,请重新登录",type:"success"}),setTimeout((function(){n.reLaunch({url:"../login/login"})}),1e3)):(e.showLoading=!1,e.$refs.uToast.show({title:t.msg,type:"error"}))}))},routerTo:function(){n.navigateTo({url:"../myself/myself"})}}};e.default=u}).call(this,t("c11b")["default"])},ac2a:function(n,e,t){"use strict";(function(n){t("3323"),t("921b");o(t("66fd"));var e=o(t("5ca6"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("c11b")["createPage"])},be6b:function(n,e,t){},faa3:function(n,e,t){"use strict";t.r(e);var o=t("a48c"),u=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=u.a},fe6b:function(n,e,t){"use strict";var o=t("be6b"),u=t.n(o);u.a}},[["ac2a","common/runtime","common/vendor"]]]);